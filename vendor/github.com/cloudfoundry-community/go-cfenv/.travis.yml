language: go
sudo: false
go:
    - 1.6.2

before_install:
  - go get -u golang.org/x/tools/cmd/cover
  - go get -u github.com/Masterminds/glide
  - go get -u github.com/alecthomas/gometalinter
  - export PATH=$HOME/gopath/bin:$PATH
  - gometalinter --install

install: glide install

script:
  - gometalinter --vendor --disable-all --enable=vet --enable=vetshadow --enable=golint --enable=ineffassign --exclude=comment --tests $(glide novendor)
  - go test -race $(glide novendor)
  - go test -cover $(glide novendor)

matrix:
    allow_failures:
        - go: tip
